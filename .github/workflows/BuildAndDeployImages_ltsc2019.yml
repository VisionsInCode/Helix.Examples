# This is a basic workflow to help you get started with Actions

name: Build and deploy images - ltsc2019

# Controls when the action will run. 
on:
  # Triggers the workflow on push or pull request events
  push:
    branches: [ dev ]
  pull_request:
    branches: [ dev ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:


jobs:
  build-images:
      runs-on: windows-2019
     
      env:
        VERSION : dev
        OS_VERSION : ltsc2019
        COMPOSE_PROJECT_NAME : basic-company-aspnetcore
        SITEETCORE_BUILD_IMAGE : mcr.microsoft.com/dotnet/core/sdk:3.1
        SOLUTION_BUILD_IMAGE : mcr.microsoft.com/dotnet/framework/sdk:4.8
        SOLUTION_BASE_IMAGE : mcr.microsoft.com/windows/nanoserver:1809
        BUILD_CONFIGURATION : debug

        LOCAL_DEPLOY_PATH : .\docker\deploy
        LOCAL_DATA_PATH : .\docker\data
        HOST_LICENSE_FOLDER : C:\License

        SITECORE_DOCKER_REGISTRY : scr.sitecore.com/sxp/
        SITECORE_MODULE_REGISTRY : scr.sitecore.com/sxp/modules/
        SITECORE_TOOLS_REGISTRY : scr.sitecore.com/tools/
        SITECORE_VERSION : 10.1-ltsc2019
        HEADLESS_SERVICES_VERSION : 16.0.0-1809
        MANAGEMENT_SERVICES_VERSION : 3.0.0-1809
        TOOLS_VERSION : 10.1-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
     
      # Check out the repo    
      steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Build the docker-compose stack  
        run: docker-compose -f '../../../examples/helix-basic-aspnetcore/docker-compose.yml' -f '../../../examples/helix-basic-aspnetcore/docker-compose.override.yml' build
      - name: List images
        run: docker images
